<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <title>The Aimless Audio Games!</title>
</head>
<body>
    <h1 style="margin: 10px 5px 5px 5px">The Aimless Audio Games!</h1>
    <h3><b>A</b>ssess an <b>I</b>ndividual's <b>M</b>edia <b>L</b>iteracy by <b>E</b>mploying <b>S</b>elective <b>S</b>ounds</h3>
    <br>
    <div class="tab">
        <button class="tablinks" onclick="openCity(event, 'oped_game_menu')">Anime Openings and Endings</button>
        <button class="tablinks" onclick="openCity(event, 'vgm_game_menu')" id="default_game_tab">Video Game Music</button>
        <button class="tablinks" onclick="openCity(event, 'steam_music_game_menu')">Steam Game Music</button>
        <script type="text/javascript">
            function openCity(evt, game_type) {
              var i, tabcontent, tablinks;
              // Get all elements with class="tabcontent" and hide them
              tabcontent = document.getElementsByClassName("tabcontent");
              for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
              }
              // Get all elements with class="tablinks" and remove the class "active"
              tablinks = document.getElementsByClassName("tablinks");
              for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
              }
              // Show the current tab, and add an "active" class to the button that opened the tab
              document.getElementById(game_type).style.display = "block";
              evt.currentTarget.className += " active";
            }
        </script>
    </div>
    <br>
    <div id="oped_game_menu" class="tabcontent">
        <h2>Anime Openings and Endings</h2>
        <br>
        <div class="menu">
            <table>
                <tr>
                    <td>
                        <label for="opening_ending">Openings, Endings, or Both?</label>
                        <br>
                        <select id="opening_ending">
                            <option value=undefined style="text-align: center"> --- </option>
                            <option value="op">OPs</option>
                            <option value="ed">EDs</option>
                            <option value="both">Both</option>
                        </select>
                    </td>
                    <td>
                        <label for="rounds">How many rounds?</label>
                        <br>
                        <select id="rounds" onclick="check_if_custom()">
                            <option value="0" style="text-align: center"> --- </option>
                            <script type="text/javascript">
                                const select = document.getElementById("rounds");
                                const options = ['1','2','5','10','15','20','30','50','75','100','Custom'];
                                for (let i = 0; i < options.length; i++) {
                                    let opt = options[i];
                                    let el = document.createElement("option");
                                    el.textContent = opt;
                                    el.value = opt;
                                    select.appendChild(el);
                                }

                                function check_if_custom() {
                                    if (document.querySelector('#rounds').value === 'Custom') {
                                        document.getElementById('custom_rounds_div').style.display = 'block';
                                    } else {
                                        document.getElementById('custom_rounds_div').style.display = 'none';
                                    }
                                }
                            </script>
                        </select>
                        <div id="custom_rounds_div">
                            <label for="custom_rounds" style="font-size: small;">Custom:&nbsp;</label>
                            <input id="custom_rounds" type="text" style="margin: auto" maxlength="3" size="3">
                            <div id="custom_rounds_error_msg" style="color: darkred; font-size: small;">
                                Invalid Entry.
                            </div>
                        </div>
                    </td>
                    <td>
                        <label for="countdown">Countdown (secs): </label>
                        <br>
                        <select id="countdown">
                            <option value="0" style="text-align: center"> --- </option>
                            <option value="15"> 15 </option>
                            <option value="10"> 10 </option>
                            <option value="5"> 5 </option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="rankings">Rankings</label>
                        <br>
                        <select id="rankings" onclick="check_if_literally_everything()">
                            <option value="everything"> Literally Everything </option>
                            <option value="top50pop">Top 50 Popular</option>
                            <option value="top100pop">Top 100 Popular</option>
                            <option value="top250pop">Top 250 Popular</option>
                            <option value="top50rate">Top 50 Rating</option>
                            <option value="top100rate">Top 100 Rating</option>
                            <option value="top250rate">Top 250 Rating</option>
                        </select>
                        <script type="text/javascript">
                            function check_if_literally_everything() {
                                if (document.querySelector('#rankings').value === 'everything') {
                                    document.getElementById('literally_everything_warning').style.display = 'block';
                                } else {
                                    document.getElementById('literally_everything_warning').style.display = 'none';
                                }
                            }
                        </script>
                    </td>
                    <td>
                        <label for="start_point_random">Video starts at&nbsp;</label>
                        <select id="start_point_random">
                            <option value="start_point" > the beginning </option>
                            <option value="random_point"> a random point </option>
                        </select>
                    </td>
                    <td>
                        <label for="cas_bias">The Cas Bias:&nbsp;</label>
                        <input id="cas_bias" type="checkbox">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="include_movies">Include Movies:&nbsp;</label>
                        <select id="include_movies">
                            <option value="yes"> Yes </option>
                            <option value="no"> No </option>
                        </select>
                    </td>
                    <td>
                        <label for="premiered_after">Premiered <i>After</i>:&nbsp;</label>
                        <select id="premiered_after">
                            <option value="NA"> Don't Care </option>
                            <script type="text/javascript">
                                const select_pa = document.getElementById("premiered_after");
                                const options_pa = ['1960','1980','1990','2000','2005','2010','2015','2020'];
                                for(let i = 0; i < options_pa.length; i++) {
                                    let opt = options_pa[i];
                                    let el = document.createElement("option");
                                    el.textContent = opt;
                                    el.value = opt;
                                    select_pa.appendChild(el);
                                }
                            </script>
                        </select>
                    </td>
                    <td>
                        <label for="pick_genres">Pick Genres</label>
                        <select id="pick_genres" onclick="check_if_choose_genre()">
                            <option value="all">All</option>
                            <option value="choose">Choose</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <div id="genres" style="font-size: medium">
                            <script type="text/javascript">
                                function check_if_choose_genre() {
                                    if (document.querySelector('#pick_genres').value === 'choose') {
                                        document.getElementById('genres').style.display = 'block';
                                    } else {
                                        document.getElementById('genres').style.display = 'none';
                                    }
                                }

                                //Create huge swarm of checkboxes
                                const select_genre = document.getElementById("genres");
                                const checkbox_genre = ['Action', 'Adventure', 'Comedy', 'Drama', 'Ecchi', 'Fantasy',
                                                        'Horror', 'Mahou Shoujo', 'Mecha', 'Music', 'Mystery',
                                                        'Psychological', 'Romance', 'Sci-Fi', 'Slice of Life', 'Sports',
                                                        'Supernatural', 'Thriller']; //can't use await json here, sry
                                for (let i = 0; i < checkbox_genre.length; i++) {
                                    let opt = checkbox_genre[i];
                                    const id_name = `genre_${opt.toLowerCase().replace(' ','_')}`;

                                    let el_label = document.createElement('label');
                                    el_label.setAttribute('for',id_name);
                                    el_label.innerHTML = opt;
                                    select_genre.appendChild(el_label);

                                    let el = document.createElement("input");
                                    el.setAttribute('type', 'checkbox');
                                    el.setAttribute('id', id_name);
                                    el.setAttribute('class', 'genre_checkboxes');
                                    el.setAttribute('value', id_name);
                                    el.checked = true;
                                    el.textContent = opt;
                                    el.value = opt;
                                    el_label.appendChild(el);

                                    if ((i+1) % 5 === 0) {select_genre.appendChild(document.createElement('br'))}
                                }
                            </script>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <br>
        <p id="incomplete_warning">Please Set All Parameters to Continue!</p>
        <p id="general_warnings"></p>
        <br>
        <button type="button" id="start_button"
                onmouseover="difficultyButton(); check_if_literally_everything(); check_if_choose_genre();"
                onmouseout="difficultyButton(mouse_off=true)" onclick="start()">Ready?</button>
        <script type="text/javascript">
            function difficultyButton(mouse_off=false) {
                const button = document.getElementById("start_button");
                button.style.fontWeight = 'normal';
                button.style.fontSize = 'medium';
                button.style.color = "white";
                if (mouse_off) {
                    button.style.background = "dimgrey";
                    button.innerText = "Ready?";
                    return;
                }
                const difficulty = document.querySelector('#countdown').value;
                switch (difficulty) {
                    case '15':
                        button.style.background = "dodgerblue";
                        button.innerText = "Start (Casual Mode)";
                        break;
                    case '10':
                        button.style.background = "#4CAF50";
                        button.innerText = "Start! (Recommended)";
                        break;
                    case '5':
                        button.style.background = "darkred";
                        button.style.backgroundImage = "url('./images/fire.gif')";
                        button.style.backgroundSize = 'cover';
                        button.style.color = "black";
                        button.style.fontSize = 'large';
                        button.style.fontWeight = 'bold';
                        button.innerText = "始める!!! (Weeb Mode)";
                        break;
                    default:
                        button.style.background = "dimgrey";
                        button.style.color = "black";
                        button.innerText = "(You're Not Ready Yet lol)";
                        break;
                }
            }
        </script>
        <br>
        <p id="literally_everything_warning" style="font-size: small; color: cornflowerblue; margin: auto; width: 80%">
            <br>Note: Given the size of the database that is being used (4300+ shows),
            using "<b>Literally Everything</b>" may very rarely display mature content.
        </p>
        <br>
        <p style="font-size: small">v1.1.2 - Created by <a href="https://youtu.be/iik25wqIuFo">CasualCheetah</a></p>
        <p class="footnote_text">Full database last updated July 2024. Top popular/rating rankings last updated 2022.</p>
    </div>
    <div id="vgm_game_menu" class="tabcontent">
        <h2>Video Game Music!</h2>
        <br>
        <div class="menu">
            <table>
                <tr>
                    <td style="width: 120px">
                        <label for="sort_by">Sort By</label>
                        <br>
                        <select id="sort_by" onchange="show_a_vgm_option()">
                            <option value="popularity">Popularity</option>
                            <option value="consoles">Consoles</option>
                            <option value="franchises">Franchises</option>
                            <option value="publishers">Publishers</option>
                            <option value="developers">Developers</option>
                        </select>
                        <script type="text/javascript">
                        // Run at start to always have default, even on refreshing the page
                        document.addEventListener('DOMContentLoaded', function() {
                            document.getElementById('sort_by').value = 'popularity'; // Set default value
                            show_a_vgm_option()
                        });

                        function show_a_vgm_option() {
                            // Hide all other rows
                            const allContent = document.querySelectorAll(".sort_by_option");
                            allContent.forEach(element => {
                                console.log(window.getComputedStyle(element).display)
                                element.style.display = 'none';
                            })

                            // Show the newly selected item
                            const selectedValue  = document.getElementById('sort_by').value;
                            if (selectedValue) {
                                // Don't use "display: block", it de-centers the <td>
                                document.getElementById(selectedValue).style.display = "table-cell";
                            }
                        }
                    </script>
                    </td>
                    <td id="popularity" class="sort_by_option" >
                        <label for="popularity_options">Popularity</label>
                        <br>
                        <select id="popularity_options">
                            <option value="top40">Top 40</option>
                            <option value="most-favorites">Top 100</option>
                            <option value="all-time-top-100">Top 1000</option>
                            <option value="literally_everything">Literally Everything</option>
                            <option value="cas_bias">Cas Bias</option>
                        </select>
                    </td>
                    <td id="consoles" class="sort_by_option">
                        <div id="console_checkboxes">
                            <script type="text/javascript">
                            //Create checkboxes for a list of platforms
                            const select_platforms = document.getElementById("console_checkboxes");
                            const checkbox_platforms = ['NES', 'SNES', 'N64', 'GC', 'Wii', 'Wii U', 'Switch',
                                                    'GB', 'GBC', 'GBA', 'DS', '3DS',
                                                    'Genesis / Mega Drive','Dreamcast','Saturn',
                                                    'PS1', 'PS2', 'PS3', 'PS4', 'PS5', 'PSP', 'PS Vita',
                                                    'Xbox', 'Xbox 360','Xbox One', 'Xbox Series X/S',
                                                    'Windows', 'MacOS','VR',
                                                    'Android','iOS'];
                            const break_rows = [6, 11, 14, 21, 25, 28] // Horizontally separate by genre
                            for (let i = 0; i < checkbox_platforms.length; i++) {
                                let opt = checkbox_platforms[i];
                                const id_name = `console_${opt.toLowerCase().replace(' ','_')}`;

                                let el_label = document.createElement('label');
                                el_label.setAttribute('for',id_name);
                                el_label.innerHTML = opt;
                                select_platforms.appendChild(el_label);

                                let el = document.createElement("input");
                                el.setAttribute('type', 'checkbox');
                                el.setAttribute('id', id_name);
                                el.setAttribute('class', 'console_checkboxes');
                                el.setAttribute('value', id_name);
                                el.checked = true;
                                el.textContent = opt;
                                el.value = opt;
                                el_label.appendChild(el);

                                //Break up into rows based on the type of console
                                if (break_rows.includes(i)) {select_platforms.appendChild(document.createElement('br'))}
                            }
                        </script>
                        </div>
                        <br>
                        <div>
                            <button onclick="deselect_all_consoles()" id="console_deselect_button"><i>Deselect All</i></button>
                            <script type="text/javascript">
                                function deselect_all_consoles() {
                                    const checkboxes = document.querySelectorAll('.console_checkboxes');
                                    checkboxes.forEach(checkbox => { checkbox.checked = false; });
                                }
                            </script>
                        </div>
                        <hr>
                        <p class="footnote_text">Selecting multiple consoles means an album will be viable if it appeared on ANY of the selected consoles.</p>
                    </td>
                    <td id="franchises" class="sort_by_option">
                        <label for="franchises_options">Sort By</label>
                        <br>
                        <select id="franchises_options"></select>
                        <script>
                            //Has to be placed above the other instances where it's used, not in index.js
                            function create_long_dropdown(name_list, selection_element){
                                for (const name of name_list) {
                                    let temp_el = document.createElement('option')
                                    temp_el.text = name;

                                    // Separate out the name from explanatory parentheses is necessary
                                    if (temp_el.value.includes(" (")) {
                                        temp_el.value = name.split(" (")[0];
                                    } else { temp_el.value = name; }
                                    selection_element.appendChild(temp_el);
                                }
                            }

                            const franchise_names = ["Pokemon","Mario","Zelda","Kirby","Metroid","Donkey Kong",
                                                    "Street Fighter","Crash Bandicoot","Monster Hunter",
                                                    "Halo","Metal Gear","Persona","Kingdom Hearts","Fire Emblem",
                                                    "Castlevania"];
                            const franchise_selection_element = document.getElementById('franchises_options');
                            create_long_dropdown(franchise_names, franchise_selection_element)
                        </script>
                        <hr>
                        <p class="footnote_text">A handful of popular franchise based on the most popular searches in KHInsider as well as personal bias.</p>
                    </td>
                    <td id="publishers" class="sort_by_option">
                        <label for="publisher_options">Publishers</label>
                        <br>
                        <select id="publisher_options"></select>
                        <script>
                            const publisher_names = ["Nintendo","Sega","Capcom","Sony","SCE (More Classic Sony)",
                                                    "Devolver","Atlus","Annapurna Interactive"];
                            const publisher_selection_element = document.getElementById("publisher_options");
                            create_long_dropdown(publisher_names, publisher_selection_element)
                        </script>
                        <hr>
                        <p class="footnote_text">No guarantees that you'll only get the big popular stuff. Some of these people publish a lot of games.</p>
                    </td>
                    <td id="developers" class="sort_by_option">
                        <label for="dev_options">Developers</label>
                        <br>
                        <select id="dev_options"></select>
                        <script>
                            const dev_names = ["FromSoftware","Supergiant Games","Insomniac Games"]
                            const dev_selection_element = document.getElementById('dev_options');
                            create_long_dropdown(dev_names, dev_selection_element);
                        </script>
                    </td>
                </tr>

            </table>
            <br>
            <p id="vgm_invalid_request">Please fix ur dang options before trying to play the game, thx.</p>
            <br>
            <button id="start_button_vgm" onmouseover="vgm_mouse_toggle(mouse_off=false)"
                                            onmouseout="vgm_mouse_toggle(mouse_off=true)"
                                            onclick="start_vgm_game()">
                Ready?
            </button>
            <script  type="text/javascript">
                function vgm_mouse_toggle(mouse_off=false) {
                    const button = document.getElementById("start_button_vgm");
                    if (mouse_off) {
                        button.innerText = "Ready?";
                    } else {
                        button.style.fontWeight = 'normal';
                        button.style.fontSize = 'medium';
                        button.style.color = "white";
                        button.innerText = "Start!";
                    }
                }
            </script>
        </div>
        <br>
        <h3>🔊 Minor Volume Warning! 🔊</h3>
        <p style="font-size: small; color: cornflowerblue">Different OSTs often have different volume levels, so don't crank things up too high.</p>
        <br>
        <div id="vgm_menu_notes">
            <h3 style=>Notes:</h3>
            <ul>
              <li>Sadly, due to copyright reasons probably, certain franchises/publishers have pulled content from the database that this program uses:</li>
                <p id="copyright_toggle_button" onclick="toggle_list()">[Show List]</p>
                <ul id="copyright_list" style="display: none">
                    <li>Sonic</li>
                    <li>Undertale/Deltarune</li>
                    <li>Some Square Enix (Final Fantasy/Chrono Trigger)</li>
                </ul>
                <script>
                    function toggle_list() {
                        const list = document.getElementById("copyright_list");
                        const btn = document.getElementById("copyright_toggle_button");
                        const isHidden = list.style.display === "none";
                        list.style.display = isHidden ? "block" : "none";
                        btn.textContent = isHidden ? "[Hide List]" : "[Show List]";
                    }
                </script>
                <li>Music titles/themes may contain references to a game's story content, so don't blame me for spoilers :)</li>
                <li>Local database last update in October 2024.</li>
                <li>Current database volume is 2200+ OSTs. Some repeats exist in wider game queries.</li>
                <li>Webscraping for local music database was done slowly over an extended period of time to avoid harassing KHIndsider's services.</li>
            </ul>
        </div>
        <br>
        <hr>
        <p style="font-size: small">v0.2.2 - Created by <a href="https://youtu.be/rsDTJpsjxgs?si=vMIizvfUr2XRy7ZU">CasualCheetah</a></p>
        <p class="footnote_text">Database uses scraped info from KHInsider.</p>
    </div>
    <div id="steam_music_game_menu" class="tabcontent">
        <h2>Personalized Gaming OST Identification via Steam</h2>
        <br>
        <label for="steam_id">What's Your 17-digit Steam ID?</label>
        <input type="text" id="steam_id" maxlength="17" size="17">
        <button onclick="showSteamIDHelp()" id="steamIDHelpButton">"Whats a Steam ID?"</button>
        <br>
        <div id="steamIDHelp" style="display: none">
            <br>
            <p>First, go to your Steam profile and look at its URL.</p>
            <p style="font-size: small">
                (If you cannot see a URL, got the 'Steam' dropdown in the top left, pick "Settings",
                 pick the "Interface" option in the left column, then check the box "Display web address bars when available".
                Not go back to your Steam profile page.)
            </p>
            <img src="images/steam_profiles_url.PNG" alt="Steam generic profile url shown in Steam application">
            <p>If you're URL has <b>"/profiles/"</b> in it, copy and paste that 17-digit number into the above text-input box.</p>
            <p>
                If there's an <b>"/id/"</b> in your profile's URL, you've given yourself a custom URL and will need to copy your
                the last part of the URL into <a href="https://www.steamidfinder.com/"> Steam ID Finder</a> to get your ID.
            </p>
            <img src="images/steam_id_url.PNG" alt="Steam profile with custom url shown in Steam application">
            <p>For me this would be "casualcheetah".</p>
            <p>(For other people, your URL name may differ from your username. In that case, use the URL.</p>
            <script type="text/javascript">
                function showSteamIDHelp() {
                    let x = document.getElementById("steamIDHelp");
                    x.style.display = x.style.display === 'none' ? 'block' : 'none';
                }
            </script>
        </div>
        <br>
        <button type="button" id="start_button_steam" onclick="start_steam_game()"> Ready? </button>
        <br>
        <p id="steam_general_warnings"></p>
        <br>





        <p style="font-size: xx-large; font-weight: bolder; background-image: linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red); color: #000">
            This is game is a work in progress!
        </p>
        <img alt="funni skelly image" class="skeleton_dance" src="./images/skeleton_dance.gif" style="transform: scaleX(-1);">
        <img alt="another funni skelly" class="skeleton_dance" src="./images/skeleton_dance.gif">

    </div>
    <div id="the_game">
        <canvas id="the_canvas" width="1024" height="576"></canvas>
        <div class="slideContainer">
            <img src="images/volume_off.png" width="15px" height="15px">
            <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
            <img src="images/volume_on.png" width="15px" height="15px">
        </div>
        <ul id="show_info"></ul>
        <p id="synopsis"></p>
        <video id="video" controls width="1024" height="576"></video>
    </div>
    <div id="the_vgm_game">
        <table>
            <tr>
                <td style="width: 320px">
                    <img id="question_block_img" src="./images/question_block2.png" alt="Question Mark Block" height="300px" width="300px">
                    <img id="vgm_img" src="" alt="The cover for the album that's playing right now" height="300px" width="300px">
                </td>
                <td>
                    <p id="album_info_box">Cheeky Quip Here</p>
                </td>
                </td>
            </tr>
        </table>
        <audio src="" id="vgm_audio_player"></audio>
        <div id="volume_slider_div">
            <label for="volume_slider">Volume: </label>
            <input type="range" id="volume_slider" min="0" max="1" step="0.05" value="1">
        </div>
        <script>
            const audio = document.getElementById("vgm_audio_player");
            const volumeSlider = document.getElementById("volume_slider");
            audio.volume = volumeSlider.value;// Set initial volume
            // Update the volume when the slider changes
            volumeSlider.addEventListener("input", function() {audio.volume = volumeSlider.value;});
        </script>
        <canvas id="vgm_canvas" height="15%"></canvas>
        <br>
        <button id="next_vgm_button" onclick="play_vgm_game()">Next</button>
        <br>
        <button id="exit_button_vgm" onclick="finish_vgm_game();">Exit</button>

    </div>

    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript">
        //Default Open Tab - Needs to be here for some reason
        document.getElementById("default_game_tab").click(); //Change which tab has this id to change the default
    </script>
</body>
</html>
